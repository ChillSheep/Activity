var cuvinte = [
"Alex Bara333", 
"Onanist434", 
"Zeu354",
"Faraon344",
"Marijuanna333",
"Uite alune464",
"Avort verbal476",
"Prezervativ263",
"Lăcătuș345",
"Cocktail344",
"Scurtmetraj386", 
"Taxidermie608",
"5gang144", 
"Șoricioaica364", 
"Unicorn Turbat374",
"Spânzurătoare343",
"Durabil366",
"Cursor342",
"Echipament Acvatic454",
"Joc energic367",
"Execuție în public462",
"Holșuruburi353",
"Corona Virus405",
"Tenia475", //parazit
"Test neanunțat365",
"Krunker355",
"Fizică Cuantică407",
"Mesteacăn304",
"Persoană materialistă365",
"Dubițar343",
"Dubstep450",
"Cretinozaur600",
"Cioban253",
"Siguranță365",
"Concurență perfectă476",
"Egalitate între sexe574",
"Bere blondă354",
"Forțe inegale464",
"Monopol306",
"Stemă locală475",
"Fulgi de ovăz406",
"Sunetul vântului466",
"Picant233",
"Ciuperci Halucinogene306",
"Lacunar600", //omisiv
"Fibră de sticlă506",
"Teren Minat354",
"Etilotest445",
"Delicat507",
"Cameră curată ca lacrima486",
"Bancnotă de o sută462",
"Ulei de masaj345",
"Telegraf506",
"Receptor364",
"Data nașterii305",
"Bârfitor545", //răspândac
"Cumpărături053",
"Zonă de nefumători365",
"Mobilă Tapițată406",
"Cruciulițe344",
"Piolet455",
"Cuarț305",
"Vizită Medicală356",
"Macetă355",
"Mașina timpului405",
"Test oftalmologic366",
"Pânză004",
"Ventricul400",
"Poimarți570",
"Ghilotină465",
"Scara Richter470",
"Sforăit045",
"Joc dublu045",
"Șaradă455",
"Detector de radiații365",
"A abandona064",
"Izvor Subteran375",
"Peruș354",
"Propolis405",
"Răspândac777",
"Hartă Meteo354",
"Demipensiune305",
"Brațe Lungi054",
"Boxeri034",
"Aluniță044",
"Boabe de cafea453",
"Arhitectură056",
"Arcuș de vioară344",
"Blocatar007",
"Coloană sonoră366",
"Țigle055",
"Anvelopă044",
"Gheișă507",
"Licoare de dragoste345",
"Casă de schimb valutar500",
"Goana după aur056",
"Mobilier De Grădină345",
"Cuib de barză404",
"CNP405",
"Apă rece044",
"Bolovan453",
"File de pește405",
"Ochelari de sudor053",
"Bariera sunetului405",
"Masterat165",
"Picioroange245",
"Cuvânt cheie465",
"copoi466",
"Biblie043",
"Pod de cale ferată405",
"Urechea mijlocie565",
"Bombă cu ceas354",
"Mișcări Reflexe344",
"Supă de linte405",
"Râșniță053",
"Numărul paginii064",
"Delicatese565",
"Teatru de marionete455",
"Hârtie Manuală366",
"Tastatură mecanică466",
"Hârciog364",
"A-ți pica fisa565",
"Aparat de ras354",
"Frunză de stejar365",
"Plug354",
"Sens orar474",
"Șampon anti mătreață445",
"Vatman405",
"Rădăcină pătrată065",
"Comandant355",
"Cârmaci455",
"Atelier de tâmplărie254",
"Circumferința pământului405",
"Robinet053",
"Spălat pe creier056",
"treierătoare400",
"Dunăre056",
"Adresă Bitcoin304",
"Cale ferată003",
"Telemea măturată406",
"Storcător de rufe056",
"Tobă de eșapament004",
"Limbajul corpului466",
"Mită065",
"Buchet043",
"Distanța de frânare354",
"Grevă japoneză046",
"Număr034",
"Mucegai305",
"Duș044",
"Molie065",
"Fondue de brânză454",
"Bulion005",
"Mâncare de casă405",
"Linie de asamblare055",
"Cerc vicios065",
"Permis de conducere243",
"Parașutist054",
"Omoară pasiunea076",
"Antigel304",
"Instructor auto056",
"Absurditate306",
"Icter500",
"Ogar055",
"Reacție isterică466",
"Retină434",
"Sutană355",
"Rac034",
"În familie305",
"Voce baritonală065",
"Hang006",
"Covor persan405",
"Călcâiul lui Ahile555",
"Coloană vertebrală056",
"Criza vârstei a doua455",
"Scrisoare de dragoste044",
"Hrișcă005",
"Nivelă cu bulă300",
"Prapur060",
"Pălărie de fetru355",
"Asasinat065",
"Lesă de câine054",
"Aruncător de flăcări444",
"Gimnastică de înviorare350",
"Proteză dentară044",
"Casă de film406",
"Chestionar005",
"Val Acustic404",
"Handralău465", //curvar
"Momeală064",
"Ceas Digital003",
"Roată de olar454",
"Chelie043",
"Blat de bucătărie405",
"Sigiliu405",
"Deșeuri Nucleare303",
"Palpitații050",
"Glugă304",
"Numerar344",
"Zdrențe057",
"Potop076",
"Defileu404",
"Maramă566",
"Relaxare304",
"Secator454",
"Stufos306",
"Chirurg465",
"Itinerar507",
"Axiomă576",
"Dezmierdare405",
"Irefutabil400",
"Altar005",
"Arteră304",
"A dormi buștean456",
"Mutare de șah065",
"Premiul Gopo506",
"Ambuteiaj065",
"Catarg304",
"Ciclon405",
"Ceai cu gheață055",
"Băştinaşă456",
"Lanțuri de zăpadă004",
"Visător444",
"Gimnastică056",
"Iesle005",
"Grupă de sânge305",
"Plasă de țânțari054",
"Antet303",
"Hematii605", //celule rosii
"Vizita Papei065",
"Fabrică de bere075",
"Dinamită453",
"Reflecție065",
"Berărie004",
"Lanț trofic405",
"Nerv optic465",
"Matcă004",
"Martor500",
"Asistență medicală045",
"Fotoliu045",
"Normă de muncă400",
"Hidrocentrală044",
"Medic primar046",
"Crevasă444", //bici
"Conversație privată054",
"Colțul ochiului024",
"Galerie de artă054",
"Dulce acrișor405",
"Părerolog700",
"Ghenă de gunoi064",
"Vârful copacului043",
"Lupte Libere500",
"Menajeră044",
"Dan Bittman066",
"Lanț muntos004",
"Luptător Grecesc403",
"Javascript366",
"Sinucidere în masă364",
"abcdefghijklmnopqrstuvwxyz306",
"Virgin243"];
var audio = new Audio('sunet.mp3');

function readTextFile(file)
{
    var rawFile = new XMLHttpRequest();
    rawFile.open("GET", file, false);
    rawFile.onreadystatechange = function ()
    {
        if(rawFile.readyState === 4)
        {
            if(rawFile.status === 200 || rawFile.status == 0)
            {
                var allText = rawFile.responseText;
            }
        }
    }
    rawFile.send(null);
}

var mesajNrCuvinte = "Momentan sunt " + cuvinte.length + " cuvinte";
function firstRun()
{
    document.getElementById("p1").style.fontFamily = "Roboto,Charcoal,sans-serif";
    var xhReq = new XMLHttpRequest();
    xhReq.open("HEAD", "activity.js", false);
    xhReq.send(null);
    var lastModified = xhReq.getResponseHeader("Last-Modified");
    document.getElementById('modified').textContent = "Last updated: " + lastModified;
    document.getElementById("nrCuvinte").textContent = mesajNrCuvinte;
}
var valoareSlider = 80;
function updateTextInput(val) {
    valoareSlider=val;
    document.getElementById('textInput').textContent=val;
}
var stopTimer=false;
var isInTimer=false;
function tryTimer(x)
{
    
    if (isInTimer==false)
    {
        timer(x);
    }
        return 0;
}
function stopTimerFunc()
{
    stopTimer=true;
    return 0;
}
function timer(x) //Am facut sa fie animat
{
    if (stopTimer==true)
    {
        stopTimer=false;
        isInTimer=false;
        return 0;
    }
    else
    {
    isInTimer = true;
    document.getElementById("textInput").innerHTML = x;
    if (x==0)
        {
            audio.play();
            stopTimer==false;
            isInTimer=false;
            return 0; //iesim sa nu se mai apeleze functia
        }
    document.getElementById("timer").value = x;
    x=x-1;
    
    setTimeout(() => {  timer(x); }, 1000);
    }
}
var nrCuvGenerate = 0;
var cuvinteDejaGenerate = new Array;
var teamsAlreadyPresent = 2;
var currentTeam = 0;
function addTeam()
{
    teamsAlreadyPresent++;
    switch(teamsAlreadyPresent) {
        case 3:
            document.getElementById("echipa3").classList.remove("d-none");
            break;
        case 4:
            document.getElementById("echipa4").classList.remove("d-none");
            document.getElementById("adaugaEchipa").classList.add("d-none");
            document.getElementById("btnGroup2").classList.remove("btn-group-toggle");
            document.getElementById("btnGroup2").classList.remove("btn-group");
            break;
    }
}
var punctajDejaAdaugat = false;
function adaugaPunctaj(forTeam)
{
    if (punctajDejaAdaugat == true)
        return 0;
    var tempVar = document.createElement("p");
    var textnode = document.createTextNode(punctaj);
    tempVar.appendChild(textnode);
    if (forTeam==0)
    switch(currentTeam)
        {
            case 1:
            document.getElementById("li1").appendChild(tempVar);
            break;
            case 2:
            document.getElementById("li2").appendChild(tempVar);
            break;
            case 3:
            document.getElementById("li3").appendChild(tempVar);
            break;
            case 4:
            document.getElementById("li4").appendChild(tempVar);
            break;
        }
    else
    {
        var temp = "li" + forTeam
        document.getElementById(temp).appendChild(tempVar);

    }
    punctajDejaAdaugat = true;
    hide();
}
function hide() {
    document.getElementById("butoane-rosu-echipa1").classList.add("d-none");
    document.getElementById("butoane-rosu-echipa2").classList.add("d-none");
    if (teamsAlreadyPresent==3)
    {
    document.getElementById("butoane-rosu-echipa3").classList.add("d-none");
    }
    if (teamsAlreadyPresent==4)
    {
    document.getElementById("butoane-rosu-echipa3").classList.add("d-none");
    document.getElementById("butoane-rosu-echipa4").classList.add("d-none");
    }
}
var punctaj = 0;

function cuvantRosu()
{
    document.getElementById("butoane-rosu-echipa1").classList.remove("d-none");
    document.getElementById("butoane-rosu-echipa2").classList.remove("d-none");
    if (teamsAlreadyPresent==3)
    {
    document.getElementById("butoane-rosu-echipa3").classList.remove("d-none");
    }
    if (teamsAlreadyPresent==4)
    {
    document.getElementById("butoane-rosu-echipa3").classList.remove("d-none");
    document.getElementById("butoane-rosu-echipa4").classList.remove("d-none");
    }
}
function start()
{    
    hide();
    punctajDejaAdaugat = false;
    document.getElementById("p1").innerHTML = "";
    var joc = 0;
    punctaj = 0;
    //Daca nu e bifata nici o casuta
    if (document.getElementById("explicat").checked == false && document.getElementById("mimat").checked==false && document.getElementById("desenat").checked == false)
    {
        document.getElementById("p1").innerHTML = "Trebuie bifata macar o casuta";
        return 0; //ca sa iesim
    }

    //Alegem una dintre casute random
    var iesim=false;
    while (true && iesim==false)
    {
        var casuta = Math.floor(Math.random() * 3);
        if (casuta==0 && document.getElementById("explicat").checked == true)
        {
            joc = 0;
            iesim=true;
        }
        else if (casuta==1 && document.getElementById("mimat").checked == true)
        {
            joc = 1;
            iesim=true;
        }
        else if (casuta==2 && document.getElementById("desenat").checked == true)
        {
            joc = 2;
            iesim=true;
        }
    }
    var cuvantCurent
    do 
    {
        if (cuvinte.length == cuvinteDejaGenerate.length)
        {
            alert("Avem prea putine cuvinte, de acum cuvintele se vor repeta");
            cuvinteDejaGenerate.length = 0; //cuvinteDejaGenerate.length = 0;
            nrCuvGenerate=0;
            break;
        }
        cuvantCurent = Math.floor(Math.random() * cuvinte.length);
    } while(cuvinteDejaGenerate.includes(cuvantCurent)==true)
    cuvinteDejaGenerate.push(cuvantCurent);
      //from 0 to nr-1
    var temp = cuvinte[cuvantCurent].substring(0, cuvinte[cuvantCurent].length - 3) //cuvant fara punctaj
    var culoare = "white";
    var rand = Math.floor(Math.random() * 10) + 1; //de la 1 pana la 10 sansa de a pica cuvantul rosu
    var mesaj = "";
    if (rand==1)
        {
            culoare="red";
            cuvantRosu();
        }
    document.getElementById("p1").innerHTML += temp.fontcolor(culoare).bold() //Punem cuvantul in bold sa se vada mai bine

    //Daca a picat prima casuta (Explicatul)
    if (joc==0)
    {
        punctaj = parseInt(cuvinte[cuvantCurent].substring(cuvinte[cuvantCurent].length - 3, cuvinte[cuvantCurent].length - 2)); //scor pt explicat
        if (punctaj)
            mesaj+= "\n Explicat";
    }
    //Daca a picat casuta nr 2 (Mimat)
    if (joc==1)
    {
        punctaj = parseInt(cuvinte[cuvantCurent].substring(cuvinte[cuvantCurent].length - 2, cuvinte[cuvantCurent].length - 1));
        if (punctaj)
            mesaj+= "\n Mimat";
    }
        //Daca a picat casuta nr 3 (Desenat)
    if (joc==2)
    {
        punctaj = parseInt(cuvinte[cuvantCurent].substring(cuvinte[cuvantCurent].length,cuvinte[cuvantCurent].length-1)); //scor pt desenat
        if (punctaj)
            mesaj+= "\n Desenat";
    }
    //Daca cuvantul e prea greu realegem iar tot
    if (punctaj==0)
    {
        start();
    }
    else
    {
        if (currentTeam<teamsAlreadyPresent)
            currentTeam++;
        else
        {
            currentTeam=1;
        }
        nrCuvGenerate++;
        document.getElementById("nrCuvinte").textContent= mesajNrCuvinte + ", iar momentan ai generat din ele " + nrCuvGenerate + " cuvinte";
        mesaj += " " + punctaj;
        document.getElementById("p1").innerHTML += mesaj.fontcolor(culoare);
        document.getElementById("randulEchipei").textContent = "E randul echipei " + currentTeam;
    }
}